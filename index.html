<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feliz Natal - Plataforma de Doa√ß√£o</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Satisfy&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">

</head>
<body>

    <section class="hero-section">
        <div class="container hero-content">
            <div class="hero-text">
                <span class="tag"><img src="../feliznatal/templates/imagens/logo.svg"></span>
                <h1>
                    Uma <span class="highlight">plataforma de doa√ß√£o</span> <br> para espalhar alegria
                </h1>
                <p>
                    Nessas festas de fim de ano mande um presente para a pessoa amada e compartilhe a alegria do Natal.
                </p>
                <a href="#" class="btn">Fazer uma Doa√ß√£o</a>
            </div>
            <div class="hero-image">
                <div class="image-placeholder-1"></div>
            </div>
        </div>
    </section>

    <section class="timer-section container">
        <h2>Tempo limitado</h2>
        <p>
            Nessas festas de fim de ano mande um presente para a pessoa amada e compartilhe a alegria do Natal.
        </p>
        <div class="countdown">
            10d -24h - 01m - 52s
        </div>
        <div class="image-placeholder-2"></div>
    </section>

    <section class="generosity-section container">
        <div class="generosity-content">
            <div class="generosity-image">
                <div class="image-placeholder-3"></div>
            </div>
            <div class="generosity-text">
                <h2>
                    Conectando generosidade <br> ao redor do mundos
                </h2>
                <p>
                    Celebre a magia do Natal de uma maneira especial! Descubra a plataforma que permite a doa√ß√£o de presentes significativos para aqueles que mais precisam. Fa√ßa parte do movimento e compartilhe o verdadeiro esp√≠rito da generosidade.
                </p>
                 <a href="#" class="btn">Fazer uma Doa√ß√£o</a>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-logo">
                <img src="../feliznatal/templates/imagens/logo.svg">
            </div>
            <div class="social-icons">
                <a href="https://www.twitter.com.br" class="tag-link">
                <img src="../feliznatal/templates/imagens/logo-twitter.svg">
                </a>
                <a href="https://whatsapp.com.br">
                <img src="../feliznatal/templates/imagens/logo-whatsapp.svg">
                </a>
                <a href="https://instagram.com">
                <img src="../feliznatal/templates/imagens/logo-instagram.svg">
                </a>
                <a href="facebook.com">
                <img src="../feliznatal/templates/imagens/logo-facebook.svg">
                </a>
                <a href="google.com.br">
                <img src="../feliznatal/templates/imagens/logo-google.svg">
                </a>
            </div>
        </div>
    </footer>
    
    <div id="donation-modal" class="modal-overlay">
        <div class="modal-content crud-modal">
            <span class="modal-close" onclick="closeModal()">&times;</span>

            <div class="modal-header">
                <h2>Gerenciamento de Doadores</h2>
            </div>

            <div class="modal-body">
                <form id="donor-form">
                    <input type="hidden" id="donor-id">
                    
                    <input type="text" id="donor-name" placeholder="Nome Completo" required>
                    <input type="email" id="donor-email" placeholder="E-mail" required>
                    <input type="number" id="donor-amount" placeholder="Valor da Doa√ß√£o (R$)" step="0.01" min="1" required>
                    
                    <button type="submit" id="save-button" class="btn">Cadastrar Doa√ß√£o</button>
                </form>

                <hr>
                
                <h3>Doa√ß√µes Realizadas (CRUD)</h3>
                <div class="table-container">
                    <table id="donors-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Valor (R$)</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
                
                <button class="btn clear-btn" onclick="clearAllData()">Limpar Tudo</button>
            </div>
        </div>
    </div>
    <script>
        // 1. Defina a data final da contagem regressiva
        // Ajuste esta data para o seu prazo final desejado! (0=Jan, 11=Dez)
        const finalDate = new Date(2025, 11, 25, 0, 0, 0).getTime(); 
        const countdownElement = document.querySelector('.countdown');
        let interval;

        function updateCountdown() {
            const now = new Date().getTime();
            const difference = finalDate - now;

            const second = 1000;
            const minute = second * 60;
            const hour = minute * 60;
            const day = hour * 24;

            if (difference < 0) {
                // A contagem terminou
                clearInterval(interval);
                countdownElement.innerHTML = 'Tempo Esgotado!';
                countdownElement.style.color = '#777';
                return;
            }

            // 2. C√°lculo e Formata√ß√£o (Adiciona zero √† esquerda)
            const days = Math.floor(difference / day);
            const hours = Math.floor((difference % day) / hour);
            const minutes = Math.floor((difference % hour) / minute);
            const seconds = Math.floor((difference % minute) / second);

            const formatTime = (value) => String(value).padStart(2, '0');

            // 3. Exibe o resultado no HTML
            countdownElement.innerHTML = 
                `${formatTime(days)}d - ${formatTime(hours)}h - ${formatTime(minutes)}m - ${formatTime(seconds)}s`;
        }

        // Inicia o contador
        updateCountdown(); 
        interval = setInterval(updateCountdown, 1000);
        
    </script>
    
    <script>
        // Refer√™ncias do DOM
        const modal = document.getElementById('donation-modal');
        const donationButtons = document.querySelectorAll('.btn');
        const form = document.getElementById('donor-form');
        const donorTableBody = document.querySelector('#donors-table tbody');
        const saveButton = document.getElementById('save-button');
        const donorIdInput = document.getElementById('donor-id');

        let donors = []; // Array principal para armazenar os doadores

        // =======================================================
        // FUN√á√ïES DE CONTROLE DO MODAL
        // =======================================================

        function openModal(event) {
            if (event.target.textContent.includes('Fazer uma Doa√ß√£o')) {
                event.preventDefault();
            }
            modal.style.display = 'flex';
            modal.classList.add('open'); 
            document.body.style.overflow = 'hidden'; 
            
            loadDonors();
        }

        function closeModal() {
            modal.classList.remove('open');
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto'; 
                resetForm(); 
            }, 300);
        }
        
        // Anexa o evento de clique aos bot√µes de doa√ß√£o
        donationButtons.forEach(button => {
            if (button.textContent.includes('Fazer uma Doa√ß√£o')) {
                 button.addEventListener('click', openModal);
            }
        });

        // Fechar modal ao clicar fora da √°rea de conte√∫do
        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        // =======================================================
        // FUN√á√ïES CRUD (Create, Read, Update, Delete)
        // =======================================================

        // READ: Carrega dados do localStorage e renderiza a tabela
        function loadDonors() {
            donors = JSON.parse(localStorage.getItem('donors')) || []; 
            renderTable();
        }

        // CREATE / UPDATE: Salva os dados do formul√°rio
        form.addEventListener('submit', function(event) {
            event.preventDefault();
            
            const name = document.getElementById('donor-name').value;
            const email = document.getElementById('donor-email').value;
            const amount = parseFloat(document.getElementById('donor-amount').value).toFixed(2);
            const id = donorIdInput.value;

            if (id) {
                // UPDATE
                const index = donors.findIndex(d => d.id == id);
                if (index !== -1) {
                    donors[index] = { id, name, email, amount };
                }
            } else {
                // CREATE
                const newDonor = {
                    id: Date.now(), 
                    name,
                    email,
                    amount
                };
                donors.push(newDonor);
            }

            saveDonors(); 
            resetForm();
        });

        // READ: Renderiza as linhas da tabela
        function renderTable() {
            donorTableBody.innerHTML = '';
            if (donors.length === 0) {
                donorTableBody.innerHTML = '<tr><td colspan="3" style="text-align:center;">Nenhuma doa√ß√£o cadastrada localmente.</td></tr>';
                return;
            }

            donors.forEach(donor => {
                const row = donorTableBody.insertRow();
                
                row.insertCell().textContent = donor.name;
                row.insertCell().textContent = `R$ ${donor.amount.replace('.', ',')}`; 

                const actionsCell = row.insertCell();
                
                const editButton = document.createElement('button');
                editButton.innerHTML = '‚úèÔ∏è';
                editButton.onclick = () => editDonor(donor.id);
                actionsCell.appendChild(editButton);

                const deleteButton = document.createElement('button');
                deleteButton.innerHTML = 'üóëÔ∏è';
                deleteButton.onclick = () => deleteDonor(donor.id);
                actionsCell.appendChild(deleteButton);
            });
        }

        // UPDATE: Preenche o formul√°rio para edi√ß√£o
        function editDonor(id) {
            const donor = donors.find(d => d.id == id);
            if (donor) {
                document.getElementById('donor-name').value = donor.name;
                document.getElementById('donor-email').value = donor.email;
                document.getElementById('donor-amount').value = donor.amount;
                donorIdInput.value = donor.id; 
                saveButton.textContent = 'Salvar Altera√ß√µes';
            }
        }

        // DELETE: Remove um doador
        function deleteDonor(id) {
            if (confirm('Tem certeza que deseja excluir esta doa√ß√£o?')) {
                donors = donors.filter(donor => donor.id != id); 
                saveDonors();
            }
        }

        // Persist√™ncia: Salva o array atual no localStorage
        function saveDonors() {
            localStorage.setItem('donors', JSON.stringify(donors));
            renderTable(); 
        }

        // Utilit√°rio: Limpa o formul√°rio e retorna ao modo "Cadastrar"
        function resetForm() {
            form.reset();
            donorIdInput.value = '';
            saveButton.textContent = 'Cadastrar Doa√ß√£o';
        }

        // Utilit√°rio: Limpa todos os dados do localStorage
        function clearAllData() {
            if (confirm('Tem certeza que deseja apagar TODOS os dados de doadores? Esta a√ß√£o n√£o pode ser desfeita.')) {
                localStorage.removeItem('donors');
                loadDonors(); 
            }
        }

        // Inicializa√ß√£o: Carrega os dados quando a p√°gina carrega
        document.addEventListener('DOMContentLoaded', loadDonors);
    </script>

</body>
</html>